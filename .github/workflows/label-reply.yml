name: Label Auto Response

on:
  issues:
    types: [ labeled ] # ä»…åœ¨ Issue è¢«æ·»åŠ æ ‡ç­¾æ—¶è§¦å‘

jobs:
  label-reply:
    runs-on: ubuntu-latest
    permissions:
      issues: write # å¿…é¡»æœ‰å†™å…¥æƒé™æ‰èƒ½å‘è¯„è®º

    steps:
      - name: Reply based on label
        uses: actions/github-script@v7
        with:
          script: |
            const label = context.payload.label.name;
            const issue = context.payload.issue;
            const author = issue.user.login;
            const responses = {
              'help wanted': `
              ğŸ‘‹ @${author} æ„Ÿè°¢æäº¤ï¼
            
              ç»´æŠ¤è€…å·²å°†æ­¤ Issue æ ‡è®°ä¸º **help wanted**ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éå¸¸æ¬¢è¿ç¤¾åŒºè´¡çŒ®ä»£ç æ¥ä¿®å¤æˆ–å®ç°å®ƒã€‚
            
              - å¦‚æœä½ æƒ³æ¥æ‰‹ï¼Œè¯·å›å¤ "I will take this" å‘ŠçŸ¥æˆ‘ä»¬ã€‚
              - æäº¤ PR å‰ï¼Œè¯·åŠ¡å¿…é˜…è¯»é¡¹ç›®çš„ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚
              `,

              'enhancement': `
              âœ¨ è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½æ”¹è¿›å»ºè®® (**enhancement**)ã€‚
            
              æˆ‘ä»¬ä¼šæ ¹æ®ä¼˜å…ˆçº§è¿›è¡Œæ’æœŸã€‚å¦‚æœä½ å–œæ¬¢è¿™ä¸ªåŠŸèƒ½ï¼Œè¯·ç»™ Issue æè¿°ç‚¹ä¸ª ğŸ‘ (Reaction)ã€‚
              å¦‚æœæœ‰æ›´è¯¦ç»†çš„è®¾è®¡æ€è·¯æˆ–ä½¿ç”¨åœºæ™¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè¡¥å……ï¼Œè¿™å°†æœ‰åŠ©äºæˆ‘ä»¬æ›´å¿«æ¨è¿›ã€‚
              `,

              'needs info': `
              ğŸ¤” **éœ€è¦æ›´å¤šä¿¡æ¯**
            
              ä½ å¥½ @${author}ï¼Œæˆ‘ä»¬éœ€è¦ä½ æä¾›æ›´å¤šçš„ä¸Šä¸‹æ–‡ï¼ˆå¦‚ï¼šæ—¥å¿—ã€æˆªå›¾ã€ç‰ˆæœ¬å·ï¼‰æ‰èƒ½ç»§ç»­æ’æŸ¥ã€‚
              è¯·æ›´æ–° Issue æè¿°ï¼Œæ”¶åˆ°å›å¤åæˆ‘ä»¬ä¼šé‡æ–°è¯„ä¼°ã€‚
              `
            };

            // æ£€æŸ¥æœ¬æ¬¡æ·»åŠ çš„æ ‡ç­¾æ˜¯å¦æœ‰é¢„è®¾çš„å›å¤
            if (responses[label]) {
              console.log(`Label "${label}" detected, adding comment...`);
            
              try {
                await github.rest.issues.createComment({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  issue_number: issue.number,
                  body: responses[label]
                });
              } catch (error) {
                console.error("Failed to add comment:", error);
              }
            } else {
              console.log(`No action defined for label: "${label}"`);
            }